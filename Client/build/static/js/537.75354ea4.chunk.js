"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[537],{3537:(e,s,a)=>{a.r(s),a.d(s,{default:()=>c});var i=a(5043),l=a(7392),n=a(7566),d=a(3216),r=a(4131),o=(a(229),a(7500)),t=a(579);function c(e){var s;let{user:a,add:c,serverUser:u,highlight:v}=e;const{user:m}=(0,r.Jd)(),h="https://realtime-chat-app-u5mw.onrender.com",p=(0,d.Zp)(),g=(0,d.zy)(),[f,y]=(0,i.useState)(!1),[_,j]=(0,i.useState)(""),[A,x]=(0,i.useState)("");(0,i.useEffect)((()=>{var e;if(null!==a&&void 0!==a&&null!==(e=a.email_addresses)&&void 0!==e&&e[0].email_address&&null!==m&&void 0!==m&&m.primaryEmailAddress.emailAddress){let e=function(e,s){let a=(e+s).split("");return a.sort(),a.join("")}(null===a||void 0===a?void 0:a.email_addresses[0].email_address,null===m||void 0===m?void 0:m.primaryEmailAddress.emailAddress);x(e)}}),[m,a]);return(0,i.useEffect)((()=>{(async e=>{try{const s=await fetch("".concat(h,"/conversation"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({conversationId:e})});if(!s.ok)return void console.log("Error:",s.status,s.statusText);{const e=await s.json();if(e&&e.conversation.length>0){const s=e.conversation[e.conversation.length-1];j(s.message)}}}catch(s){console.error("Error fetching session:",s)}})(A)}),[A]),(0,t.jsxs)("div",{style:v&&a.username===g.pathname.split("/").pop()?{backgroundColor:"var(--primary-blue1)"}:null,id:a.email_addresses[0].email_address,className:"userSlide",onClick:e=>{var s;null!==u&&void 0!==u&&null!==(s=u.friendList)&&void 0!==s&&s.includes(null===a||void 0===a?void 0:a.email_addresses[0].email_address)&&p("/chats/".concat(a.username))},children:[(0,t.jsx)("img",{height:35,width:35,className:"avatarImage",src:a.image_url,alt:"".concat(a.username,"'s_Image")}),(0,t.jsxs)("div",{className:"userDetails",children:[(0,t.jsx)("h3",{children:a.username}),_&&(0,t.jsx)("h5",{children:_.replace(/<br \/>/g,"..")})]}),!c||null!==u&&void 0!==u&&null!==(s=u.friendList)&&void 0!==s&&s.includes(null===a||void 0===a?void 0:a.email_addresses[0].email_address)?null:(0,t.jsx)(l.A,{onClick:()=>{null!==a&&void 0!==a&&a.email_addresses[0].email_address?(async()=>{try{var e;const s=await fetch("".concat(h,"/addFriend"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:null===u||void 0===u?void 0:u.name,sendername:null===a||void 0===a?void 0:a.username,user:null===u||void 0===u?void 0:u.email,isAccepted:!1,to:null===a||void 0===a||null===(e=a.email_addresses[0])||void 0===e?void 0:e.email_address})});if(!s.ok){const e=await s.json();return void(e.already?alert(e.message):console.log(e))}{const e=await s.json();e.status?(y(!0),alert(e.message)):console.log(e.message)}}catch(s){console.log(s)}})():console.log("id Hani")},children:f?(0,t.jsx)(o.A,{}):(0,t.jsx)(n.A,{})})]})}},7566:(e,s,a)=>{var i=a(4994);s.A=void 0;var l=i(a(39)),n=a(579);s.A=(0,l.default)((0,n.jsx)("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"PersonAdd")}}]);
//# sourceMappingURL=537.75354ea4.chunk.js.map