"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[228],{3228:(e,n,t)=>{t.r(n),t.d(n,{default:()=>c});var s=t(5043),r=t(3003),a=t(8235),o=t(579);function c(e){let{selectedUser:n,roomId:t,user:c}=e;const i=(0,r.wA)(),l=(0,r.d4)((e=>e.newMessage)),[d,u]=(0,s.useState)([]);(0,s.useEffect)((()=>{g(t)}),[t]),(0,s.useEffect)((()=>{l&&(u((e=>[...e,l])),i((0,a.hh)()))}),[l,i]);const m=e=>{const n=new Date(e),t=n.getHours(),s=n.getMinutes(),r=t>=12?"PM":"AM",a=t%12||12,o=h(e);return"| ".concat(o," | ").concat(a,":").concat(s<10?"0"+s:s," ").concat(r)},h=e=>{const n=new Date(e),t=n.getDate(),s=n.getMonth()+1,r=n.getFullYear();return"".concat(t<10?"0"+t:t,"-").concat(s<10?"0"+s:s,"-").concat(r)},g=async e=>{try{const t=await fetch("".concat("https://realtime-chat-app-u5mw.onrender.com","/conversation"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({conversationId:e})});if(!t.ok)return void console.log("Error:",t.status,t.statusText);{const e=await t.json();if(e&&e.conversation.length>0)u(e.conversation);else{u([]);document.getElementById("conversation").innerHTML='<div id="deaultConvo">No conversation with '.concat(n.username,"</div>")}}}catch(t){console.error("Error fetching session:",t)}};return(0,o.jsx)("div",{id:"conversation",name:"conversation",className:"conversation",children:d&&d.map(((e,t)=>{const{message:s,url:r}=(e=>{const[n,t]=null===e||void 0===e?void 0:e.split("#$IMG$#");return{message:n,url:t}})(null===e||void 0===e?void 0:e.message),a=(e=>{const n=null===e||void 0===e?void 0:e.match(/(https?:\/\/[^\s]+)/);if(n){const t=n[0],s=e.replace(t,'<a href="'.concat(t,'" target="_blank" rel="noopener noreferrer">').concat(t,"</a>"));return(0,o.jsx)("span",{dangerouslySetInnerHTML:{__html:s}})}return(0,o.jsx)("span",{children:e})})(s),i=e.from,l=null===c||void 0===c?void 0:c.primaryEmailAddress.emailAddress;return(0,o.jsxs)("div",{className:i===l?"messageFromCurrentUser":"messageFromSecondUser",children:[(0,o.jsx)("div",{className:"avatarContainer",children:(0,o.jsx)("img",{src:i===l?c.imageUrl:n.image_url,alt:i===l?c.username+" image":n.username+" image"})}),(0,o.jsxs)("div",{className:"textMessageCont",children:[(0,o.jsx)("h4",{children:a}),r&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("img",{loading:"lazy",src:r,alt:s}),(0,o.jsx)("h4",{children:s})]}),(0,o.jsx)("span",{children:m(e.date)})]})]},t)}))})}}}]);
//# sourceMappingURL=228.22461d08.chunk.js.map